function upiTransactionIDField(){var o="";return"yes"==upiwc_params.require_tran_field&&(o='<span class="upiwc-required">*</span>'),"yes"==upiwc_params.show_tran_field?'<div><label for="upiwc-transaction-number"><strong>Enter 12-digit Transaction ID:</strong> '+o+'</label><div class="upiwc-clear-area"></div><input type="text" id="upiwc-transaction-number" placeholder="001422121258" maxlength="12" style="width: 70%;" onkeypress="return isNumber(event)" /></div></div></form><div class="upiwc-clear"></div>':""}function upiHandleField(){return"yes"==upiwc_params.show_upi_handle_field?'<input type="text" id="upiwc-id" placeholder="upiaddress" style="width: 45%;" /><select id="upiwc-handle"><option>@airtel</option><option>@airtelpaymentsbank</option><option>@apb</option><option>@apl</option><option>@allbank</option><option>@albk</option><option>@allahabadbank</option><option>@andb</option><option>@axisgo</option><option>@axis</option><option>@axisbank</option><option>@axisb</option><option>@okaxis</option><option>@abfspay</option><option>@barodampay</option><option>@barodapay</option><option>@boi</option><option>@cnrb</option><option>@csbpay</option><option>@csbcash</option><option>@centralbank</option><option>@cbin</option><option>@cboi</option><option>@cub</option><option>@dbs</option><option>@dcb</option><option>@dcbbank</option><option>@denabank</option><option>@equitas</option><option>@federal</option><option>@fbl</option><option>@finobank</option><option>@hdfcbank</option><option>@payzapp</option><option>@okhdfcbank</option><option>@rajgovhdfcbank</option><option>@hsbc</option><option>@imobile</option><option>@pockets</option><option>@ezeepay</option><option>@eazypay</option><option>@idbi</option><option>@idbibank</option><option>@idfc</option><option>@idfcbank</option><option>@idfcnetc</option><option>@cmsidfc</option><option>@indianbank</option><option>@indbank</option><option>@indianbk</option><option>@iob</option><option>@indus</option><option>@indusind</option><option>@icici</option><option>@myicici</option><option>@okicici</option><option>@ikwik</option><option>@jkb</option><option>@jsbp</option><option>@kbl</option><option>@karb</option><option>@kbl052</option><option>@kvb</option><option>@karurvysyabank</option><option>@kvbank</option><option>@kotak</option><option>@kaypay</option><option>@kmb</option><option>@kmbl</option><option>@obc</option><option>@paytm</option><option>@pingpay</option><option>@psb</option><option>@pnb</option><option>@sib</option><option>@srcb</option><option>@sc</option><option>@scmobile</option><option>@scb</option><option>@scbl</option><option>@sbi</option><option>@oksbi</option><option>@syndicate</option><option>@syndbank</option><option>@synd</option><option>@lvb</option><option>@lvbank</option><option>@rbl</option><option>@tjsb</option><option>@uco</option><option>@unionbankofindia</option><option>@unionbank</option><option>@uboi</option><option>@ubi</option><option>@united</option><option>@utbi</option><option>@upi</option><option>@vjb</option><option>@vijb</option><option>@vijayabank</option><option>@ubi</option><option>@yesbank</option><option>@ybl</option><option>@yesbankltd</option></select>':'<input type="text" id="upiwc-id" placeholder="upiaddress" style="width: 70%;" />'}function isNumber(o){o=o||window.event;var t=o.which?o.which:o.keyCode;return!(8!=t&&0!=t&&t>31&&(t<48||t>57))}jQuery(document).ready(function(o){if("undefined"==typeof upiwc_params)return!1;window.onbeforeunload=function(){return"Are you sure you want to leave?"};var t=o("#data-qr-code"),i=encodeURI(t.data("link")),n=new QRCode("upiwc-qrcode",{text:i,width:t.data("width"),height:t.data("height"),correctLevel:QRCode.CorrectLevel.H,quietZone:6,onRenderingEnd:function(){o("#upiwc-confirm-payment").trigger("click")}});o("#upiwc-cancel-payment").click(function(o){window.location.href=upiwc_params.cancel_url,n.clear(),o.preventDefault()}),o("#upiwc-confirm-payment").on("click",function(t){var i=o.confirm({title:'<span class="upiwc-popup-title">Scan this QR Code</span>',content:o("#js_qrcode").html(),useBootstrap:!1,animation:"scale",type:o("#upiwc-confirm-payment").data("theme"),boxWidth:o("#data-dialog-box").data("pay"),draggable:!1,buttons:{nextStep:{text:"Proceed to Next Step",btnClass:"btn-"+o("#upiwc-confirm-payment").data("theme"),keys:["enter","shift"],action:function(){if("yes"==upiwc_params.disable_info)return i.toggle(),o.confirm({title:'<span class="upiwc-popup-title">Confirm your Payment!</span>',content:'<div id="upiwc-confirm-text" class="upiwc-confirm-text">'+upiwc_params.confirm_redirect+"</div>",useBootstrap:!1,type:o("#upiwc-confirm-payment").data("theme"),boxWidth:o("#data-dialog-box").data("redirect"),draggable:!1,buttons:{confirm:{text:"Confirm",btnClass:"btn-"+o("#upiwc-confirm-payment").data("theme"),action:function(){window.onbeforeunload=null,o.dialog({title:"Processing!",content:"Please wait while we are processing your request...",useBootstrap:!1,draggable:!1,type:"blue",closeIcon:!1,boxWidth:o("#data-dialog-box").data("redirect")}),window.location.href=upiwc_params.callback_url+"?wc_order_id="+upiwc_params.orderid}},goBack:{text:"Go Back",action:function(){i.toggle()}}}}),!1;o.confirm({title:'<span class="upiwc-popup-title">Confirm your Payment!</span>',content:'<form id="upiwc-form"><div class="upiwc-form-group"><div><label for="upiwc-id"><strong>Enter your UPI ID:</strong> <span class="upiwc-required">*</span></label><div class="upiwc-clear-area"></div>'+upiHandleField()+'</div><div class="upiwc-clear"></div>'+upiTransactionIDField()+'<div id="upiwc-confirm-text" class="upiwc-confirm-text">'+upiwc_params.confirm_message+"</div>",useBootstrap:!1,draggable:!1,animation:"scale",type:o("#upiwc-confirm-payment").data("theme"),boxWidth:o("#data-dialog-box").data("confirm"),buttons:{formSubmit:{text:"Confirm",btnClass:"btn-"+o("#upiwc-confirm-payment").data("theme"),keys:["enter","shift"],action:function(){var t="",n="",a=this.$content.find("#upiwc-id").val(),p=this.$content.find("#upiwc-handle").val(),e=this.$content.find("#upiwc-transaction-number").val();if(p&&(t=p),e&&(n=e),!a||(!e||12!=e.length)&&"yes"==upiwc_params.require_tran_field)return o.alert({title:"Error!",content:"Please enter all required valid details and try again.",useBootstrap:!1,draggable:!1,type:"red",boxWidth:o("#data-dialog-box").data("redirect")}),!1;var r=o.dialog({title:"Processing!",content:"Please wait while we are processing your request...",useBootstrap:!1,draggable:!1,type:"orange",closeIcon:!1,boxWidth:o("#data-dialog-box").data("redirect")});o.ajax({url:upiwc_params.ajaxurl,type:"POST",dataType:"json",data:{action:"process_upi_id_verification",orderID:upiwc_params.orderid,upiid:a+t,tranid:n,redirect:upiwc_params.redirect_url,status:upiwc_params.payment_status,security:upiwc_params.security},success:function(t,n,a){!0===t.success?(r.setTitle("Thanks for your Confirmation."),r.setContent(t.data.message),r.setType("green"),""!=t.data.redirect&&setTimeout(function(){window.onbeforeunload=null,window.location.href=t.data.redirect},3e3)):(r.close(),o.confirm({title:"Verification failed!",content:"BAD_REQUEST_ERROR: Requested Order not found. Please try again.",useBootstrap:!1,boxWidth:o("#data-dialog-box").data("redirect"),draggable:!1,type:"red",buttons:{goBack:{text:"Go Back",action:function(){i.toggle()}}}}))},error:function(t){r.close(),o.confirm({title:"Error Occured!",content:t.status+" "+t.statusText+": Please contact with site adminitrator for further assistance. Please try again.",useBootstrap:!1,boxWidth:o("#data-dialog-box").data("redirect"),draggable:!1,type:"red",buttons:{goBack:{text:"Go Back",action:function(){i.toggle()}}}})}})}},goBack:{text:"Go Back",action:function(){i.toggle()}}},onContentReady:function(){var o=this;this.$content.find("form").on("submit",function(t){t.preventDefault(),o.$$formSubmit.trigger("click")})}})}},close:function(){window.onbeforeunload=null}}});t.preventDefault()})});