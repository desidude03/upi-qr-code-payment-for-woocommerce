(function(t){function e(){var t="";if(1==woo_upi_ajax_data.require_tran_field&&(t='<span class="upiwc-required">*</span>'),1==woo_upi_ajax_data.show_tran_field)return'<div class="upiwc-clear"></div><div><label for="upi-transaction-number"><strong>Enter 12-digit Transaction ID:</strong> '+t+'</label><div class="upiwc-clear-area"></div><input type="text" id="upi-transaction-number" placeholder="001422121258" /></div></div></form><div class="upiwc-clear"></div>'}t("#upiwc-confirm-payment").on("click",function(a){window.onbeforeunload=function(){return"Are you sure you want to leave?"},t.confirm({title:"Scan this QR Code",content:t("#js_qrcode").html(),useBootstrap:!1,theme:"modern",animation:"scale",type:"blue",boxWidth:t("#data-dialog-box").data("pay"),draggable:!1,buttons:{nextStep:{text:"Preceed to Next Step",btnClass:"btn-blue",keys:["enter","shift"],action:function(){t.confirm({title:"Confirm your Payment!",content:'<form id="upiwc-form"><div class="upiwc-form-group"><div><label for="upi-id"><strong>Enter your UPI ID:</strong> <span class="upiwc-required">*</span></label><div class="upiwc-clear-area"></div><input type="text" id="upi-id" placeholder="upiaddress@upi" /><div><div class="upiwc-clear"></div>'+e()+woo_upi_ajax_data.confirm_message,useBootstrap:!1,draggable:!1,theme:"modern",animation:"scale",type:"blue",boxWidth:t("#data-dialog-box").data("confirm"),buttons:{formSubmit:{text:"Submit",btnClass:"btn-blue",keys:["enter","shift"],action:function(){var e=this.$content.find("#upi-id").val(),a=this.$content.find("#upi-transaction-number").val();if(!e||!a&&1==woo_upi_ajax_data.require_tran_field)return t.alert({title:"Error!",content:"Please enter all required details and try again.",useBootstrap:!1,draggable:!1,theme:"modern",type:"red"}),!1;t.ajax({url:woo_upi_ajax_data.ajaxurl,type:"POST",dataType:"json",data:{action:"process_collect_upi_id",orderID:woo_upi_ajax_data.orderid,upiid:e,tranid:a,security:woo_upi_ajax_data.security},success:function(e,a,i){!0===e.success?(window.onbeforeunload=null,t.dialog({title:"Thanks for your Confirmation.",content:e.data.message,useBootstrap:!1,draggable:!1,theme:"modern",type:"green",closeIcon:!1}),""!=e.data.redirect&&setTimeout(function(){location.href=e.data.redirect},3e3)):t.alert({title:"Verification failed!",content:"BAD_REQUEST_ERROR: Requested Order not found. Please try again.",useBootstrap:!1,draggable:!1,theme:"modern",type:"red"})},error:function(e){t.alert({title:"Error Occured!",content:e.status+" "+e.statusText+": Please contact with site adminitrator for further assistance. Please try again.",useBootstrap:!1,draggable:!1,theme:"modern",type:"red"})}})}}},onContentReady:function(){var t=this;this.$content.find("form").on("submit",function(e){e.preventDefault(),t.$$formSubmit.trigger("click")})}})}}}})});var a=t("#data-qr-code"),i=a.data("link"),r=new QRCode("upi-qrcode",{width:a.data("width"),height:a.data("height")});r.makeCode(i)})(jQuery);